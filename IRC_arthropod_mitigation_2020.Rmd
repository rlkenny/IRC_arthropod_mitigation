---
title: "IRC_arthropod_analysis_2020"
author: "Rachel Kenny"
date: "3/30/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##Load libraries & data
```{r load}

# Load packages
library(tidyverse)
library(readxl)
library(readr)
library(janitor)

# Load raw data
arth_data_raw <- read_xlsx("combined arthropod data.xlsx")

# Load tidy data
arth_data <- read_csv("IRC_restoration_arthropod_data.csv") %>% 
  clean_names()

# Filter arthropod data from CSS (coastal sage scrub) habitat
arth_css <- arth_data %>% 
  filter(type == "CSS")

# Filter arthropod data from GL (grassland) habitat
arth_gl <- arth_data %>% 
  filter(type == "GL")

```


## Run analysis
```{r}

library(lme4)

# Linear mixed effects model for taxa richness as a function of restoration year, with transect as a random effect and habitat type as a fixed effect
lme1 = lmer(richness_taxa ~ type + year_restoration + (1|transect), data=arth_data)

lme1

summary(lme1) 

anova(lme1) # I don't understand this, just copying something I've seen repeated but yet not sure why you would do this 


library(nlme)
lme2 <- lme(
  fixed = richness_taxa ~ type+year_restoration,
  random = ~1|transect,
  data = arth_data
)
summary(lme2)


##############


# same models, but taking out type
lme1 = lmer(richness_taxa ~ year_restoration + (1|transect), data=arth_data)

lme1

summary(lme1) 




lme2 <- lme(
  fixed = richness_taxa ~ year_restoration,
  random = ~1|transect,
  data = arth_data
)
summary(lme2)


```


```{r}

# (-.3, .5) might actualy be anywhere between -.3 and .5, the true value may lie between -.3 and .5

# .1 1.96*.108

# (-.1 - .3)

# run two seperate models for habitat type



```








